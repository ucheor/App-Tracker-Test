<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>App Tracker Board</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet" />
<style>
/* ‚îÄ‚îÄ‚îÄ Variables ‚îÄ‚îÄ‚îÄ */
:root {
  --bg-base:        #f0e6f0;
  --bg-card:        #ffffff;
  --bg-header:      rgba(255,255,255,0.55);
  --text-primary:   #3a2d4a;
  --text-secondary: #6b5b7a;
  --text-muted:     #9a8aaa;
  --border:         rgba(160,140,180,0.25);
  --shadow:         0 4px 24px rgba(100,70,130,0.10);
  --shadow-hover:   0 8px 32px rgba(100,70,130,0.18);
  --toggle-track:   #c9b8d9;
  --toggle-knob:    #fff;
}
[data-theme="dark"] {
  --bg-base:        #1e1728;
  --bg-card:        #2a2236;
  --bg-header:      rgba(42,34,54,0.70);
  --text-primary:   #efe8f5;
  --text-secondary: #c4b5d4;
  --text-muted:     #8a7d9a;
  --border:         rgba(180,160,210,0.18);
  --shadow:         0 4px 24px rgba(0,0,0,0.30);
  --shadow-hover:   0 8px 32px rgba(0,0,0,0.40);
  --toggle-track:   #4a3d5e;
  --toggle-knob:    #ddd0ec;
}

/* ‚îÄ‚îÄ‚îÄ Reset ‚îÄ‚îÄ‚îÄ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

body {
  font-family:'Nunito',sans-serif;
  background:var(--bg-base);
  color:var(--text-primary);
  min-height:100vh;
  transition:background .4s,color .4s;
  background-image:
    radial-gradient(ellipse at 20% 50%,rgba(200,180,230,.35) 0%,transparent 55%),
    radial-gradient(ellipse at 80% 20%,rgba(180,220,210,.30) 0%,transparent 50%),
    radial-gradient(ellipse at 60% 80%,rgba(230,200,200,.30) 0%,transparent 50%);
}
[data-theme="dark"] body {
  background-image:
    radial-gradient(ellipse at 20% 50%,rgba(50,35,70,.5) 0%,transparent 55%),
    radial-gradient(ellipse at 80% 20%,rgba(30,50,55,.4) 0%,transparent 50%),
    radial-gradient(ellipse at 60% 80%,rgba(55,35,40,.4) 0%,transparent 50%);
}

/* ‚îÄ‚îÄ‚îÄ Layout ‚îÄ‚îÄ‚îÄ */
.page-wrap{max-width:1305px;margin:0 auto;padding:28px 20px 56px}

/* ‚îÄ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ */
.header {
  display:flex;align-items:center;justify-content:space-between;
  background:var(--bg-header);backdrop-filter:blur(12px);
  border:1px solid var(--border);border-radius:20px;
  padding:18px 24px;margin-bottom:22px;
  box-shadow:var(--shadow);
  transition:background .4s,border-color .4s,box-shadow .4s;
}
.header-left{display:flex;align-items:center;gap:14px}
.header-icon{display:flex;align-items:center;justify-content:center;width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,#6b5b7a,#9a7db8);box-shadow:0 3px 10px rgba(107,91,122,.35);flex-shrink:0}
.header-icon svg{width:24px;height:24px}
.header h1{font-family:'Quicksand',sans-serif;font-weight:700;font-size:1.45rem;color:var(--text-primary);letter-spacing:-.3px;transition:color .4s}
.header-sub{font-size:.76rem;color:var(--text-muted);font-weight:600;margin-top:1px;transition:color .4s}

/* ‚îÄ‚îÄ‚îÄ Theme Toggle ‚îÄ‚îÄ‚îÄ */
.theme-toggle{display:flex;align-items:center;gap:8px;cursor:pointer;user-select:none}
.theme-toggle .icon-sun,.theme-toggle .icon-moon{font-size:17px}
.toggle-track{width:46px;height:25px;background:var(--toggle-track);border-radius:13px;position:relative;transition:background .4s}
.toggle-knob{width:19px;height:19px;background:var(--toggle-knob);border-radius:50%;position:absolute;top:3px;left:3px;box-shadow:0 2px 6px rgba(0,0,0,.22);transition:left .35s cubic-bezier(.4,0,.2,1),background .4s}
[data-theme="dark"] .toggle-knob{left:24px}

/* ‚îÄ‚îÄ‚îÄ Summary Row ‚îÄ‚îÄ‚îÄ */
.summary-row{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:22px}
.summary-card{background:var(--bg-card);border:1px solid var(--border);border-radius:16px;padding:10px 8px;text-align:center;box-shadow:var(--shadow);transition:background .4s,border-color .4s,box-shadow .4s,transform .2s}
.summary-card:hover{box-shadow:var(--shadow-hover);transform:translateY(-2px)}
.summary-card.clickable{cursor:pointer}
.summary-card.clickable:active{transform:translateY(0)}
.summary-card .badge{display:inline-flex;align-items:center;gap:4px;font-size:.68rem;font-weight:700;text-transform:uppercase;letter-spacing:.7px;border-radius:20px;padding:2px 9px;margin-bottom:3px}
.badge-green{background:rgba(76,175,122,.15);color:#3d9a6a}
.badge-red{background:rgba(239,91,91,.15);color:#d64545}
.badge-amber{background:rgba(245,166,35,.15);color:#d48f1a}
.badge-all{background:rgba(107,91,122,.12);color:#6b5b7a}
[data-theme="dark"] .badge-all{background:rgba(196,181,212,.15);color:#c4b5d4}
.summary-card .count{font-family:'Quicksand',sans-serif;font-size:1.6rem;font-weight:700;color:var(--text-primary);transition:color .4s}
.summary-card .label{font-size:.73rem;color:var(--text-muted);font-weight:600;margin-top:1px;transition:color .4s}
.summary-card .clear-hint{font-size:.63rem;color:var(--text-muted);font-weight:600;margin-top:3px;opacity:.7;transition:color .4s,opacity .2s}
.summary-card.clickable:hover .clear-hint{opacity:1;color:var(--text-secondary)}
/* dim the All card when no filters are active (nothing to clear) */
.summary-card.all-card.no-filters{opacity:.45}
.summary-card.all-card.no-filters:hover{opacity:.45;transform:none;box-shadow:var(--shadow)}

/* ‚îÄ‚îÄ‚îÄ Summary card active highlights ‚îÄ‚îÄ‚îÄ */
.summary-card.active-filter{border-width:2px}
/* green ‚Äî Operational */
.summary-card.sc-op.active-filter{
  background:linear-gradient(145deg,rgba(76,175,122,.13),rgba(76,175,122,.06));
  border-color:#4caf7a;
  box-shadow:0 4px 16px rgba(76,175,122,.28);
}
.summary-card.sc-op.active-filter .count{color:#3d9a6a}
/* red ‚Äî Down */
.summary-card.sc-down.active-filter{
  background:linear-gradient(145deg,rgba(239,91,91,.13),rgba(239,91,91,.06));
  border-color:#ef5b5b;
  box-shadow:0 4px 16px rgba(239,91,91,.28);
}
.summary-card.sc-down.active-filter .count{color:#d64545}
/* amber ‚Äî Maintenance */
.summary-card.sc-maint.active-filter{
  background:linear-gradient(145deg,rgba(245,166,35,.13),rgba(245,166,35,.06));
  border-color:#f5a623;
  box-shadow:0 4px 16px rgba(245,166,35,.28);
}
.summary-card.sc-maint.active-filter .count{color:#d48f1a}
/* purple ‚Äî All (active when ANY filter is on, so it's always "reachable") */
.summary-card.all-card.active-filter{
  background:linear-gradient(145deg,rgba(107,91,122,.13),rgba(107,91,122,.06));
  border-color:#6b5b7a;
  box-shadow:0 4px 16px rgba(107,91,122,.28);
  opacity:1 !important;
}
.summary-card.all-card.active-filter .count{color:#6b5b7a}
[data-theme="dark"] .summary-card.all-card.active-filter .count{color:#c4b5d4}

/* ‚îÄ‚îÄ‚îÄ Section Row ‚îÄ‚îÄ‚îÄ */
.section-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.section-row h2{font-family:'Quicksand',sans-serif;font-size:.95rem;font-weight:700;color:var(--text-secondary);transition:color .4s}
.last-updated{font-size:.72rem;color:var(--text-muted);font-weight:600;transition:color .4s}

/* ‚îÄ‚îÄ‚îÄ App Grid  4 per row ‚îÄ‚îÄ‚îÄ */
.app-grid{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:12px;margin-bottom:18px}

/* ‚îÄ‚îÄ‚îÄ App Card ‚îÄ‚îÄ‚îÄ */
.app-card {
  background:var(--bg-card);border:1px solid var(--border);border-radius:15px;
  padding:15px 16px;display:flex;align-items:center;gap:14px;
  box-shadow:var(--shadow);
  transition:background .4s,border-color .4s,box-shadow .3s,transform .15s;
  outline:none;
}
.app-card:hover{box-shadow:var(--shadow-hover);transform:translateY(-2px)}

/* ‚îÄ‚îÄ‚îÄ Cartoon Status Circle ‚îÄ‚îÄ‚îÄ */
.status-circle {
  width:46px;height:46px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  flex-shrink:0;position:relative;
  border:3.5px solid rgba(0,0,0,.18);
  box-shadow:inset 0 -4px 0 rgba(0,0,0,.15),0 3px 8px rgba(0,0,0,.15);
  transition:background .2s;
}
.status-circle.up            {background:linear-gradient(145deg,#5ec88a,#3da86a)}
.status-circle.down          {background:linear-gradient(145deg,#f07070,#d94545)}
.status-circle.maintenance   {background:linear-gradient(145deg,#f7bf52,#e8a520);border-color:rgba(0,0,0,.22)}

/* cartoon shine */
.status-circle::before{content:'';position:absolute;top:5px;left:8px;width:15px;height:8px;background:rgba(255,255,255,.45);border-radius:50%;pointer-events:none}

.status-circle .arrow-svg{width:21px;height:21px;position:relative;z-index:1;filter:drop-shadow(0 2px 2px rgba(0,0,0,.25))}

/* pulse ring for down */
@keyframes pulse-ring{
  0%  {box-shadow:inset 0 -4px 0 rgba(0,0,0,.15),0 3px 8px rgba(0,0,0,.15),0 0 0 0   rgba(239,91,91,.45)}
  70% {box-shadow:inset 0 -4px 0 rgba(0,0,0,.15),0 3px 8px rgba(0,0,0,.15),0 0 0 9px  rgba(239,91,91,0)}
  100%{box-shadow:inset 0 -4px 0 rgba(0,0,0,.15),0 3px 8px rgba(0,0,0,.15),0 0 0 0   rgba(239,91,91,0)}
}
.status-circle.down{animation:pulse-ring 2.2s infinite}

/* ‚îÄ‚îÄ‚îÄ App Info ‚îÄ‚îÄ‚îÄ */
.app-info{flex:1;min-width:0}
.app-name{font-family:'Quicksand',sans-serif;font-weight:700;font-size:.92rem;color:var(--text-primary);transition:color .4s;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.app-status-label{font-size:.73rem;font-weight:700;margin-top:3px;text-transform:uppercase;letter-spacing:.5px}
.app-status-label.up          {color:#3d9a6a}
.app-status-label.down        {color:#d64545}
.app-status-label.maintenance {color:#d48f1a}

/* ‚îÄ‚îÄ‚îÄ Filter Bar ‚îÄ‚îÄ‚îÄ */
.filters{display:flex;flex-direction:column;gap:10px;margin-bottom:18px}
.filter-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.filter-label{font-family:'Quicksand',sans-serif;font-size:.76rem;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.7px;min-width:62px;transition:color .4s}
.filter-pills{display:flex;gap:6px;flex-wrap:wrap}
.pill {
  font-family:'Quicksand',sans-serif;font-weight:700;font-size:.78rem;
  padding:5px 14px;border-radius:20px;border:1.5px solid var(--border);
  background:var(--bg-card);color:var(--text-secondary);
  cursor:pointer;user-select:none;
  transition:background .2s,color .2s,border-color .2s,transform .15s,box-shadow .2s;
  -webkit-tap-highlight-color:transparent;
}
.pill:hover{border-color:rgba(107,91,122,.45);background:rgba(107,91,122,.07)}
.pill:active{transform:scale(.94)}
.pill.active{border-color:transparent;color:#fff;background:#6b5b7a;box-shadow:0 2px 8px rgba(107,91,122,.30)}
[data-theme="dark"] .pill.active{background:#9a8aaa;box-shadow:0 2px 8px rgba(0,0,0,.30)}
/* status pills keep their own colour when active */
.pill.active.st-up          {background:#3da86a;box-shadow:0 2px 8px rgba(61,168,106,.30)}
.pill.active.st-down        {background:#d94545;box-shadow:0 2px 8px rgba(217,69,69,.30)}
.pill.active.st-maintenance {background:#e8a520;box-shadow:0 2px 8px rgba(232,165,32,.30)}

/* ‚îÄ‚îÄ‚îÄ Empty state ‚îÄ‚îÄ‚îÄ */
.empty-state{grid-column:1/-1;text-align:center;padding:40px 20px;color:var(--text-muted);font-weight:600;font-size:.88rem;transition:color .4s}

/* ‚îÄ‚îÄ‚îÄ Card entrance animation ‚îÄ‚îÄ‚îÄ */
@keyframes fadeSlideUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* ‚îÄ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ‚îÄ */
@media(max-width:960px){
  .app-grid{grid-template-columns:1fr 1fr 1fr}
  .summary-row{grid-template-columns:repeat(3,1fr)}
}
@media(max-width:660px){
  .app-grid{grid-template-columns:1fr 1fr}
  .summary-row{grid-template-columns:1fr 1fr}
}
@media(max-width:420px){
  .app-grid{grid-template-columns:1fr}
  .summary-row{grid-template-columns:1fr 1fr}
  .page-wrap{padding:20px 14px 48px}
  .header{padding:14px 18px}
}
</style>
</head>
<body data-theme="light">

<!-- Hidden SVG icons -->
<svg width="0" height="0" style="position:absolute">
  <defs>
    <symbol id="arrow-up" viewBox="0 0 24 24">
      <path d="M12 3.5 L4.5 14 L9 14 L9 20.5 L15 20.5 L15 14 L19.5 14 Z" fill="white" stroke="rgba(0,0,0,.22)" stroke-width="1.2" stroke-linejoin="round"/>
    </symbol>
    <symbol id="arrow-down" viewBox="0 0 24 24">
      <path d="M12 20.5 L4.5 10 L9 10 L9 3.5 L15 3.5 L15 10 L19.5 10 Z" fill="white" stroke="rgba(0,0,0,.22)" stroke-width="1.2" stroke-linejoin="round"/>
    </symbol>
    <symbol id="icon-warn" viewBox="0 0 24 24">
      <path d="M12 3 L2 21 L22 21 Z" fill="white" stroke="rgba(0,0,0,.22)" stroke-width="1.4" stroke-linejoin="round"/>
      <rect x="11" y="10" width="2" height="5" rx=".8" fill="rgba(0,0,0,.5)"/>
      <circle cx="12" cy="17.2" r="1" fill="rgba(0,0,0,.5)"/>
    </symbol>
  </defs>
</svg>

<div class="page-wrap">

  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <div class="header-icon">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <!-- left tall bar -->
          <rect x="2" y="8" width="4" height="11" rx="1.5" fill="rgba(255,255,255,0.95)"/>
          <!-- middle medium bar -->
          <rect x="8" y="5" width="4" height="14" rx="1.5" fill="rgba(255,255,255,0.75)"/>
          <!-- right short bar -->
          <rect x="14" y="11" width="4" height="8" rx="1.5" fill="rgba(255,255,255,0.55)"/>
          <!-- top-right dot: live indicator -->
          <circle cx="21" cy="4" r="2.2" fill="#5ec88a"/>
          <circle cx="21" cy="4" r="1.1" fill="white"/>
        </svg>
      </div>
      <div>
        <h1>Miriam's Dashboard</h1>
        <div class="header-sub">App Tracker Board</div>
      </div>
    </div>
    <div class="theme-toggle" onclick="toggleTheme()" role="button" tabindex="0" aria-label="Toggle theme">
      <span class="icon-sun">‚òÄÔ∏è</span>
      <div class="toggle-track"><div class="toggle-knob"></div></div>
      <span class="icon-moon">üåô</span>
    </div>
  </header>

  <!-- Summary -->
  <div class="summary-row">
    <div class="summary-card clickable all-card no-filters" id="card-all" onclick="clearFilters()">
      <div class="badge badge-all">‚óÜ All</div>
      <div class="count" id="count-all">24</div>
      <div class="label">Total Apps</div>
      <div class="clear-hint">click to clear filters</div>
    </div>
    <div class="summary-card clickable sc-op" id="card-op" onclick="toggleSummaryFilter('up')">
      <div class="badge badge-green">‚óè Operational</div>
      <div class="count" id="count-op">0</div>
      <div class="label">Running</div>
    </div>
    <div class="summary-card clickable sc-down" id="card-down" onclick="toggleSummaryFilter('down')">
      <div class="badge badge-red">‚óè Down</div>
      <div class="count" id="count-down">0</div>
      <div class="label">Down</div>
    </div>
    <div class="summary-card clickable sc-maint" id="card-maint" onclick="toggleSummaryFilter('maintenance')">
      <div class="badge badge-amber">‚óè Maintenance</div>
      <div class="count" id="count-maint">0</div>
      <div class="label">Maintenance</div>
    </div>
  </div>

  <!-- Section header -->
  <div class="section-row">
    <h2>All Applications</h2>
    <div class="last-updated" id="last-updated">Last Updated: ‚Äî</div>
  </div>

  <!-- Filters -->
  <div class="filters">
    <div class="filter-row">
      <span class="filter-label">Type</span>
      <div class="filter-pills" id="pills-type"></div>
    </div>
    <div class="filter-row">
      <span class="filter-label">Status</span>
      <div class="filter-pills" id="pills-status"></div>
    </div>
  </div>

  <!-- Cards -->
  <div class="app-grid" id="app-grid"></div>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  APP LIST ‚Äî edit name, status, and category here
//  statuses:   "up" | "down" | "maintenance"
//  categories: "CI/CD" | "Monitoring" | "Security" | "Applications" | "Infrastructure"
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const applications = [
  { name: "Vulcan Gitlab",        status: "down",  category: "CI/CD"          },
  { name: "APP CI Pipelines",     status: "up",  category: "CI/CD"          },
  { name: "Splunk-AWS-DTRA",      status: "maintenance",    category: "Monitoring"     },
  { name: "Grafana-On-Prem",      status: "up",    category: "Monitoring"     },
  { name: "Grafana-DTRA",         status: "up",    category: "Monitoring"     },
  { name: "PrismaCloud-On-Prem",  status: "up",    category: "Security"       },
  { name: "PrismaCloud-DTRA",     status: "up",    category: "Security"       },
  { name: "Rancher-AWS",          status: "up",    category: "Infrastructure" },
  { name: "Coder-On-Prem",        status: "maintenance",    category: "Infrastructure" },
  { name: "Sonarqube-DEPOT",      status: "up",    category: "CI/CD"          },
  { name: "MINES-env3",           status: "up",    category: "Applications"   },
  { name: "MINES-env2",           status: "up",    category: "Applications"   },
  { name: "MINES-env1",           status: "down",    category: "Applications"   },
  { name: "MINES-TEST",           status: "up",    category: "Applications"   },
  { name: "MINES-STAGING",        status: "up",    category: "Applications"   },
  { name: "MINES-PROD",           status: "up",    category: "Applications"   },
  { name: "Keycloak-env3",        status: "up",    category: "Security"       },
  { name: "Keycloak-env2",        status: "up",    category: "Security"       },
  { name: "Keycloak-env1",        status: "maintenance",    category: "Security"       },
  { name: "Keycloak-test",        status: "up",    category: "Security"       },
  { name: "Keycloak-coresvcs",    status: "up",    category: "Security"       },
  { name: "Keycloak-prod",        status: "up",    category: "Security"       },
  { name: "Firewall-0",           status: "up",    category: "Security"       },
  { name: "Firewall-1",           status: "up",    category: "Security"       }
];

// ‚îÄ‚îÄ‚îÄ Lookup maps ‚îÄ‚îÄ‚îÄ
const iconMap  = { up:'arrow-up', down:'arrow-down', maintenance:'icon-warn' };
const labelMap = { up:'Operational', down:'Down', maintenance:'Maintenance' };

// ‚îÄ‚îÄ‚îÄ Filter state ‚îÄ‚îÄ‚îÄ
let activeType   = 'all';   // 'all' or a category string
let activeStatus = 'all';   // 'all' | 'up' | 'down' | 'maintenance'

// ‚îÄ‚îÄ‚îÄ Service-type pill definitions (order + icons) ‚îÄ‚îÄ‚îÄ
const typeFilters = [
  { key:'all',            label:'All Types',      icon:'' },
  { key:'CI/CD',          label:'CI/CD',          icon:'üîÑ' },
  { key:'Monitoring',     label:'Monitoring',     icon:'üìä' },
  { key:'Security',       label:'Security',       icon:'üîí' },
  { key:'Applications',   label:'Applications',   icon:'üì¶' },
  { key:'Infrastructure', label:'Infrastructure', icon:'‚öôÔ∏è' }
];

// ‚îÄ‚îÄ‚îÄ Status pill definitions ‚îÄ‚îÄ‚îÄ
const statusFilters = [
  { key:'all',           label:'All Statuses', cls:'' },
  { key:'up',            label:'Operational',  cls:'st-up' },
  { key:'down',          label:'Down',         cls:'st-down' },
  { key:'maintenance',   label:'Maintenance',  cls:'st-maintenance' }
];

// ‚îÄ‚îÄ‚îÄ Build pill rows (once) ‚îÄ‚îÄ‚îÄ
function buildPills() {
  const typeRow   = document.getElementById('pills-type');
  const statusRow = document.getElementById('pills-status');

  typeFilters.forEach(f => {
    const p = document.createElement('button');
    p.className = 'pill' + (f.key === activeType ? ' active' : '');
    p.textContent = (f.icon ? f.icon + ' ' : '') + f.label;
    p.dataset.key = f.key;
    p.addEventListener('click', () => { activeType = f.key; syncPills(); syncSummaryCards(); renderCards(); });
    typeRow.appendChild(p);
  });

  statusFilters.forEach(f => {
    const p = document.createElement('button');
    p.className = 'pill' + (f.key === activeStatus ? ' active' : '') + (f.cls ? ' ' + f.cls : '');
    p.textContent = f.label;
    p.dataset.key = f.key;
    p.dataset.cls = f.cls || '';
    p.addEventListener('click', () => { activeStatus = f.key; syncPills(); syncSummaryCards(); renderCards(); });
    statusRow.appendChild(p);
  });
}

// ‚îÄ‚îÄ‚îÄ Highlight active pills ‚îÄ‚îÄ‚îÄ
function syncPills() {
  document.querySelectorAll('#pills-type .pill').forEach(p => {
    p.classList.toggle('active', p.dataset.key === activeType);
  });
  document.querySelectorAll('#pills-status .pill').forEach(p => {
    p.classList.toggle('active', p.dataset.key === activeStatus);
  });
}

// ‚îÄ‚îÄ‚îÄ Clear all filters ‚îÄ‚îÄ‚îÄ
function clearFilters() {
  activeType   = 'all';
  activeStatus = 'all';
  syncPills();
  syncSummaryCards();
  renderCards();
}

// ‚îÄ‚îÄ‚îÄ Toggle status filter via summary card (tap same status again ‚Üí off) ‚îÄ‚îÄ‚îÄ
function toggleSummaryFilter(status) {
  activeStatus = (activeStatus === status) ? 'all' : status;
  syncPills();
  syncSummaryCards();
  renderCards();
}

// ‚îÄ‚îÄ‚îÄ Sync all four summary-card highlight + dim states ‚îÄ‚îÄ‚îÄ
function syncSummaryCards() {
  const filtersActive = (activeType !== 'all' || activeStatus !== 'all');

  // All card: dim when nothing active, highlight when something is
  const allCard = document.getElementById('card-all');
  allCard.classList.toggle('no-filters',    !filtersActive);
  allCard.classList.toggle('active-filter',  filtersActive);

  // Status cards: highlight only the one matching activeStatus
  ['up','down','maintenance'].forEach(s => {
    const idMap  = { up:'card-op', down:'card-down', maintenance:'card-maint' };
    const el     = document.getElementById(idMap[s]);
    el.classList.toggle('active-filter', activeStatus === s);
  });
}

// ‚îÄ‚îÄ‚îÄ Filter + render cards ‚îÄ‚îÄ‚îÄ
function renderCards() {
  const grid = document.getElementById('app-grid');
  grid.innerHTML = '';

  const filtered = applications.filter(a =>
    (activeType   === 'all' || a.category === activeType) &&
    (activeStatus === 'all' || a.status   === activeStatus)
  );

  if (filtered.length === 0) {
    grid.innerHTML = '<div class="empty-state">No apps match the current filters.</div>';
    return;
  }

  filtered.forEach((app, i) => {
    const card = document.createElement('div');
    card.className = 'app-card';

    card.innerHTML =
      `<div class="status-circle ${app.status}">
         <svg class="arrow-svg"><use href="#${iconMap[app.status]}"/></svg>
       </div>
       <div class="app-info">
         <div class="app-name">${app.name}</div>
         <div class="app-status-label ${app.status}">${labelMap[app.status]}</div>
       </div>`;

    card.style.animation = `fadeSlideUp .25s ease ${i*.04}s both`;
    grid.appendChild(card);
  });
}

// ‚îÄ‚îÄ‚îÄ Summary counts (always totals, not filtered) ‚îÄ‚îÄ‚îÄ
function renderSummary() {
  const c = { up:0, down:0, maintenance:0 };
  applications.forEach(a => c[a.status]++);
  document.getElementById('count-all').textContent   = applications.length;
  document.getElementById('count-op').textContent    = c.up;
  document.getElementById('count-down').textContent  = c.down;
  document.getElementById('count-maint').textContent = c.maintenance;
}

// ‚îÄ‚îÄ‚îÄ Timestamp ‚îÄ‚îÄ‚îÄ
function updateTimestamp() {
  document.getElementById('last-updated').textContent = 'Last Updated: ' + new Date().toLocaleString();
}

// ‚îÄ‚îÄ‚îÄ Theme ‚îÄ‚îÄ‚îÄ
function toggleTheme() {
  document.body.setAttribute('data-theme',
    document.body.getAttribute('data-theme')==='dark' ? 'light' : 'dark');
}
document.querySelector('.theme-toggle').addEventListener('keydown', e => {
  if (e.key==='Enter'||e.key===' '){e.preventDefault();toggleTheme();}
});

// ‚îÄ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ
buildPills();
renderSummary();
renderCards();
updateTimestamp();
setInterval(updateTimestamp, 60000);
</script>
</body>
</html>